{% extends 'scrumboard/base.html' %}

{% load scrumboard_extras %}
{% load bootstrap3 %}

{% block head_title %}Sprint {{ sprint.name }} Planning{% endblock %}

{% block rel_stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}scrumboard/css/sprint_planning.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}scrumboard/css/bootstrap3-spinner.css">

    <style>
        .form-group label {
            display: block;
        }

        textarea.form-control {
            height: 100px;
            resize: none;
        }

        .select2 {
            width: 100% !important;
        }

        .form-control {
            padding: 5px;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function() {
            $('select').select2({
                width: 'resolve'
            });
        });
    </script>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <form role="form" class="form" method="POST" action="{% url 'scrumboard:sprint_planning' sprint.pk %}">
            <fieldset hidden>
                {% csrf_token %}
                {{ formset.management_form }}
            </fieldset>
            <div class="row">
            {% for form in formset %}
                <div class="col-xs-12 col-sm-6 col-lg-4">
                    <div class="row item-container">
                        <div class="col-xs-10 col-sm-11">
                            {% fancy_item_form form %}
                        </div>
                        <div class="form-group btn-group-vertical col-xs-2 col-sm-1 item-control" data-toggle="buttons">
                            <label class="btn btn-default btn-block" for="{{ form.prefix}}-move-left">
                                <input id="{{ form.prefix}}-move-left" name="{{ form.prefix }}-{{ form.DELETE.name }}" type=checkbox>
                                {% bootstrap_icon 'arrow-right' %}
                            </label>
                            <label class="btn btn-default btn-block" for="{{ form.prefix}}-move-right">
                                <input id="{{ form.prefix}}-move-right" name="{{ form.prefix }}-{{ form.DELETE.name }}" type=checkbox>
                                {% bootstrap_icon 'arrow-left' %}
                            </label>
                            <label class="btn btn-danger btn-block" for="{{ form.DELETE.auto_id }}">
                                <input id="{{ form.DELETE.auto_id }}" name="{{ form.prefix }}-{{ form.DELETE.name }}" type=checkbox>
                                {% bootstrap_icon 'trash' %}
                            </label>
                        </div>
                    </div>
                </div>
            {% endfor %}
            </div>
            {% buttons %}
            <button type="submit" class="btn btn-primary btn-block">
                {% bootstrap_icon "star" %} Submit
            </button>
            {% endbuttons %}
        </form>
    </div>

    <script src="{{ STATIC_URL }}scrumboard/js/bootstrap3-spinner.js"></script>
{% endblock %}